<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash â€¢ Upnext</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" >

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="new-sidebar" id="new-sidebar">
        <div class="new-sidebar-header">
            <div class="new-logo-container">
                <img src="/logo.png" alt="Upnext Logo" class="new-logo-img" />
            </div>
            <button class="new-toggle-btn" id="new-toggleBtn">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>
        <ul class="new-nav-list">
            <li class="new-nav-item" id="home-nav-item">
                <a href="/index.html" class="new-nav-link" data-route="home">
                    <span class="new-nav-icon"><i class="fas fa-home"></i></span>
                    <span class="new-nav-text">Home</span>
                </a>
            </li>
            <li class="new-nav-item" id="events-nav-item">
                <a href="/events.html" class="new-nav-link" data-route="events">
                    <span class="new-nav-icon"><i class="fa-solid fa-magnifying-glass"></i></span>
                    <span class="new-nav-text">Explore</span>
                </a>
            </li>
            <li class="new-nav-item" id="flash-nav-item">
                <a href="/flash.html" class="new-nav-link new-active" data-route="flash">
                    <span class="new-nav-icon"><i class="fas fa-bolt"></i></span>
                    <span class="new-nav-text">Flash</span>
                </a>
            </li>
            <li class="new-nav-item" id="profile-nav-item">
                <a href="/profile.html" class="new-nav-link" data-route="profile">
                    <span class="new-nav-icon"><i class="fas fa-user"></i></span>
                    <span class="new-nav-text">Profile</span>
                </a>
            </li>
        </ul>
    </div>

    <nav class="bottom-nav" id="bottom-nav">
        <a href="/index.html" class="nav-item" data-route="home">
            <i class="fas fa-home"></i><span>Home</span>
        </a>
        <a href="/events.html" class="nav-item" data-route="events">
            <i class="fa-solid fa-magnifying-glass"></i><span>Explore</span>
        </a>
        <a href="/flash.html" class="nav-item active" data-route="flash">
            <i class="fas fa-bolt"></i><span>Flash</span>
        </a>
        <a href="/profile.html" class="nav-item" data-route="profile">
            <i class="fas fa-user"></i><span>Profile</span>
        </a>
    </nav>

    <div class="container">
        <div class="settings-container">
            <h2 class="section-title"> Flash Updates</h2>
            <div class="profile-section">
                <h2><i class="fas fa-filter"></i> Filter Updates</h2>
                <div class="form-group">
                    <input type="checkbox" id="show-notices" checked>
                    <label for="show-notices">Show Notices</label>
                </div>
                <div class="form-group">
                    <input type="checkbox" id="show-updates" checked>
                    <label for="show-updates">Show Quick Updates</label>
                </div>
                <div class="form-group">
                    <label for="category-filter">Category</label>
                    <select id="category-filter">
                        <option value="all">All Categories</option>
                        <option value="events">Events</option>
                        <option value="announcements">Announcements</option>
                        <option value="updates">App Updates</option>
                    </select>
                </div>
            </div>
            <div class="profile-section">
                <h2><i class="fas fa-rss"></i> Quick Updates</h2>
                <div class="flash-list" id="flash-updates">
                    <!-- Updates will be dynamically loaded here -->
                    <div class="flash-item skeleton">
                        <div class="skeleton-title"></div>
                        <div class="skeleton-text"></div>
                    </div>
                </div>
            </div>
            <div class="profile-section">
                <h2><i class="fas fa-bell"></i> Recent Notices</h2>
                <div class="flash-list" id="flash-notices">
                    <!-- Notices will be dynamically loaded here -->
                    <div class="flash-item skeleton">
                        <div class="skeleton-title"></div>
                        <div class="skeleton-text"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/data.js"></script>
    <script src="/utils.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            setupSidebar();
            loadFlashContent();
            setupFilters();

            // Event listeners for filter changes
            document.getElementById('show-notices').addEventListener('change', loadFlashContent);
            document.getElementById('show-updates').addEventListener('change', loadFlashContent);
            document.getElementById('category-filter').addEventListener('change', loadFlashContent);
        });

        function setupSidebar() {
            const toggleBtn = document.getElementById('new-toggleBtn');
            const sidebar = document.getElementById('new-sidebar');
            toggleBtn.addEventListener('click', () => {
                sidebar.classList.toggle('new-collapsed');
                const container = document.querySelector('.container');
                container.style.paddingLeft = sidebar.classList.contains('new-collapsed') ? '70px' : '250px';
            });
        }

        function loadFlashContent() {
            const noticesContainer = document.getElementById('flash-notices');
            const updatesContainer = document.getElementById('flash-updates');
            const showNotices = document.getElementById('show-notices').checked;
            const showUpdates = document.getElementById('show-updates').checked;
            const category = document.getElementById('category-filter').value;

            // Clear existing content
            noticesContainer.innerHTML = '';
            updatesContainer.innerHTML = '';

            // Sample data (replace with actual API call or data source)
            const flashData = {
                notices: [
                    { id: 1, title: 'Bosco Chriz 2025', content: 'Students interested must attend a meeting after school in classroom 11-D.', category: 'announcements', date: '2025-11-01' },
                    { id: 2, title: 'Server Maintenance', content: 'Scheduled maintenance on Nov 10, 2025.', category: 'announcements', date: '2025-11-01' },
                    { id: 3, title: 'New Feature Alert', content: 'Flash Updates added!', category: 'updates', date: '2025-10-28' }
                ],
                updates: [
                    { id: 3, title: 'Event Reminder', content: 'Hackathon starts tomorrow!', category: 'events', date: '2025-11-05' },
                    { id: 4, title: 'Profile Update', content: 'New badge system introduced.', category: 'updates', date: '2025-11-03' }
                ]
            };

            // Filter and render notices
            if (showNotices) {
                const filteredNotices = flashData.notices.filter(item => category === 'all' || item.category === category);
                if (filteredNotices.length === 0) {
                    noticesContainer.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-bell empty-state-icon"></i>
                            <h3>No Notices Available</h3>
                            <p>Check back later for important announcements.</p>
                        </div>`;
                } else {
                    filteredNotices.forEach(notice => {
                        const noticeElement = document.createElement('div');
                        noticeElement.className = 'flash-item card';
                        noticeElement.innerHTML = `
                            <div class="card-content">
                                <h3 class="card-title">${notice.title}</h3>
                                <p class="card-description">${notice.content}</p>
                                <div class="card-actions">
                                    <span class="card-subtitle">${notice.date}</span>
                                    <span class="badge">${notice.category}</span>
                                </div>
                            </div>`;
                        noticesContainer.appendChild(noticeElement);
                    });
                }
            } else {
                noticesContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bell empty-state-icon"></i>
                        <h3>Notices Hidden</h3>
                        <p>Enable notices in filters to view them.</p>
                    </div>`;
            }

            // Filter and render updates
            if (showUpdates) {
                const filteredUpdates = flashData.updates.filter(item => category === 'all' || item.category === category);
                if (filteredUpdates.length === 0) {
                    updatesContainer.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-rss empty-state-icon"></i>
                            <h3>No Updates Available</h3>
                            <p>Check back later for quick updates.</p>
                        </div>`;
                } else {
                    filteredUpdates.forEach(update => {
                        const updateElement = document.createElement('div');
                        updateElement.className = 'flash-item card';
                        updateElement.innerHTML = `
                            <div class="card-content">
                                <h3 class="card-title">${update.title}</h3>
                                <p class="card-description">${update.content}</p>
                                <div class="card-actions">
                                    <span class="card-subtitle">${update.date}</span>
                                    <span class="badge">${update.category}</span>
                                </div>
                            </div>`;
                        updatesContainer.appendChild(updateElement);
                    });
                }
            } else {
                updatesContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-rss empty-state-icon"></i>
                        <h3>Updates Hidden</h3>
                        <p>Enable updates in filters to view them.</p>
                    </div>`;
            }
        }

        function setupFilters() {
            // Initialize filter states from user preferences if available
            const userPreferences = JSON.parse(localStorage.getItem('userPreferences')) || {};
            if (userPreferences.flashFilters) {
                document.getElementById('show-notices').checked = userPreferences.flashFilters.showNotices ?? true;
                document.getElementById('show-updates').checked = userPreferences.flashFilters.showUpdates ?? true;
                document.getElementById('category-filter').value = userPreferences.flashFilters.category ?? 'all';
            }

            // Save filter changes to user preferences
            document.querySelectorAll('#show-notices, #show-updates, #category-filter').forEach(element => {
                element.addEventListener('change', () => {
                    const userPreferences = JSON.parse(localStorage.getItem('userPreferences')) || {};
                    userPreferences.flashFilters = {
                        showNotices: document.getElementById('show-notices').checked,
                        showUpdates: document.getElementById('show-updates').checked,
                        category: document.getElementById('category-filter').value
                    };
                    localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
                });
            });
        }
    </script>
</body>
</html>